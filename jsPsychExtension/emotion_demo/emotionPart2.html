<!DOCTYPE html>
<html>
  <head>
    <title>MMBB battery</title>
    <script src="./jspsych/dist/graphFunction.js"> </script>
    <script src="./jspsych/dist/jspsych.js"></script>
    <script src="./jspsych/dist/plugin-html-button-response.js"></script>
    <script src="./jspsych/dist/plugin-audio-keyboard-response.js"></script>
    <script src="./jspsych/dist/plugin-audio-button-response.js"> </script>
    <script src="./jspsych/dist/plugin-html-button-response.js"> </script>
    <script src="./jspsych/dist/plugin-instructions.js"> </script>
    <script src="./jspsych/dist/plugin-survey-likert.js"> </script>
    <script src="./jspsych/dist/plugin-canvas-button-response.js"> </script>
    <script src="./jspsych/dist/extension-accelerometer.js"> </script>
    <script src="./jspsych/dist/plugin-html-keyboard-response.js"> </script>
    <script src="./jspsych/dist/plugin-survey-multi-choice.js"> </script>
    <script src="./jspsych/dist/plugin-initialize-microphone.js"> </script>
    <script src="./jspsych/dist/plugin-html-audio-response.js"> </script>
    <script src="./jspsych/dist/plugin-html-slider-response.js"> </script>
    <link href="https://unpkg.com/jspsych@7.2.1/css/jspsych.css" rel="stylesheet" type="text/css" />

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

  </head>
  <body></body>
  <script>

    var jsPsych = initJsPsych({
      extensions: [
        {type: jsPsychExtensionAccelerometer }
      ],
      on_finish: function() {
        jsPsych.data.get().localSave('csv','emotionENGPart2.csv');
      }
    });

    var instruction = {
        type: jsPsychInstructions,
        pages: [
        '<p style="font-size:7vw;">Emotion task Part 2</p>',
        ],
        button_label_next: "Next",
        button_label_previous: "Previous",
        show_clickable_nav: true
    }

    var instruction1 = {
        type: jsPsychInstructions,
        pages: [
        '<p style="font-size:30px;">Rate the emotions expressed by the music</p>',
        ],
        button_label_next: "Next",
        button_label_previous: "Previous",
        show_clickable_nav: true
    }

    var t2_1Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/092.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t2_2Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/023.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t2_3Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/031.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t2_4Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/042.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var part2_scales = {
    type: jsPsychHtmlSliderResponse,
    stimulus: ['Mood', 'Energy', 'Tension'],
    nSliders: 3,
    require_movement: true,
    slider_width: 250,
    prompt: 'Rate the emotions expressed by the music',
    labels: [['Negative', 'Neutral','Positive'],['Low Energy', 'High Energy'],['Low Tension', 'High Tension']]
    };
    
    const t2_1 = {
        timeline: [t2_1Stim, part2_scales]
    }

    const t2_2 = {
        timeline: [t2_2Stim, part2_scales]
    }

    const t2_3 = {
        timeline: [t2_3Stim, part2_scales]
    }

    const t2_4 = {
        timeline: [t2_4Stim, part2_scales]
    }

    const randomPart2Trials = {
        timeline: jsPsych.randomization.shuffle([t2_1, t2_2,t2_3,t2_4])
    }

   var instruction2 = {
        type: jsPsychInstructions,
        pages: [
        '<p style="font-size:30px;">Rate how the music <strong> makes you feel </strong></p>',
        ],
        button_label_next: "Next",
        button_label_previous: "Previous",
        show_clickable_nav: true
    }

    var t3_1Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/069.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t3_2Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/105.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t3_3Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/033.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var t3_4Stim = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: './final_stimuli/041.mp3',
        prompt: '<p style="font-size:30px;">Listen to the music</p>',
        trial_duration: 15500,
        choices: ["NO_KEYS"],
    }

    var part3_scales = {
    type: jsPsychHtmlSliderResponse,
    stimulus: ['Mood', 'Energy', 'Intensity of experienced emotion','Liking','Familiarity with the music example'],
    nSliders: 5,
    require_movement: true,
    slider_width: 250,
    labels: [['Negative', 'Neutral','Positive'],['Low Energy', 'High Energy'],
    ['No emotion', ' Very strong emotion'],['Dislike','Like'],['Unfamiliar','Very Familiar']],
    prompt: 'Rate how the music <strong> makes you feel </strong>'
  };
    
    const t3_1 = {
        timeline: [t3_1Stim, part3_scales]
    }

    const t3_2 = {
        timeline: [t3_2Stim, part3_scales]
    }

    const t3_3 = {
        timeline: [t3_3Stim, part3_scales]
    }

    const t3_4 = {
        timeline: [t3_4Stim, part3_scales]
    }

    const randomPart3Trials = {
        timeline: jsPsych.randomization.shuffle([t3_1, t3_2,t3_3,t3_4])
    }

   jsPsych.run([instruction, instruction1, randomPart2Trials,instruction2, randomPart3Trials]);

 </script>
</html>
