<!DOCTYPE html>
<html>
  <head>
    <title>MMBB batery</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../../jspsych/dist/graphFunction.js"> </script>
    <script src="https://unpkg.com/jspsych@7.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-keyboard-response@1.1.0"></script>
    <script src="../../jspsych/dist/plugin-audio-button-response.js"> </script>
    <script src="../../jspsych/dist/plugin-html-button-response.js"> </script>
    <script src="../../jspsych/dist/plugin-instructions.js"> </script>
    <script src="../../jspsych/dist/plugin-survey-likert.js"> </script>
    <script src="../../jspsych/dist/plugin-canvas-button-response.js"> </script>
    <script src="../../jspsych/dist/extension-accelerometer.js"> </script>
    <script src="../../jspsych/dist/plugin-html-keyboard-response.js"> </script>
    <script src="../../jspsych/dist/plugin-survey-multi-choice.js"> </script>
    <script src="../../jspsych/dist/plugin-initialize-microphone.js"> </script>
    <script src="../../jspsych/dist/plugin-html-audio-response.js"> </script>
    <link href="../../jspsych/dist/jspsych.css" rel="stylesheet" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

  </head>
  <body></body>
  <script>

    var jsPsych = initJsPsych({
      extensions: [],
      on_finish: function() {
        //jsPsych.data.displayData();
        jsPsych.data.get().localSave('csv','mydata.csv');
      }
    });

    var instruction1 = {
        type: jsPsychInstructions,
        pages: [
        '<p style="font-size:7vw;">Welcome MMBB batery.</p>',
        '<p style="font-size:7vw;">Movement task</p>',
        '<p style="font-size:7vw;">When you click start, you will hear a song.</p>',
        '<p style="font-size:7vw;">Your task is to move along with the beat.</p>'
        ],
        button_label_next: "Next",
        button_label_previous: "Previous",
        show_clickable_nav: true
    }

    var instruction1 = {
        type: jsPsychInstructions,
        pages: [
        '<p style="font-size:7vw;">Welcome MMBB batery.</p>',
        '<p style="font-size:7vw;">Singing task</p>',
        '<p style="font-size:7vw;">When you click start, you will hear a song.</p>',
        '<p style="font-size:7vw;">Your task is to sing along.</p>'
        ],
        button_label_next: 'Next',
        button_label_previous: 'Previous',
        show_clickable_nav: true
    }

    var initializeMic = {
      type: jsPsychInitializeMicrophone
    };

    var record = {
        type: jsPsychHtmlAudioResponse,
        audiostimulus: '../../songs/movementTapAudio/silence.wav',
        stimulus: '<p style="font-size:48px;">Sing</p>',
        recording_duration: 5000,
        allow_playback: true,
    };

    jsPsych.run([instruction1, initializeMic, record]);

 </script>
</html>
